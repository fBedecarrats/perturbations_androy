<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Florent Bédécarrats, Stéphanie Carrière">

<title>Perturbations dans la commune d’Androy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="perturbations_androy_files/libs/clipboard/clipboard.min.js"></script>
<script src="perturbations_androy_files/libs/quarto-html/quarto.js"></script>
<script src="perturbations_androy_files/libs/quarto-html/popper.min.js"></script>
<script src="perturbations_androy_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="perturbations_androy_files/libs/quarto-html/anchor.min.js"></script>
<link href="perturbations_androy_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="perturbations_androy_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="perturbations_androy_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="perturbations_androy_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="perturbations_androy_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="perturbations_androy_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="perturbations_androy_files/libs/jquery-1.12.4/jquery.min.js"></script>
<link href="perturbations_androy_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="perturbations_androy_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="perturbations_androy_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="perturbations_androy_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="perturbations_androy_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="perturbations_androy_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="perturbations_androy_files/libs/leaflet-binding-2.1.2/leaflet.js"></script>
<script src="perturbations_androy_files/libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="perturbations_androy_files/libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Perturbations dans la commune d’Androy</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Florent Bédécarrats, Stéphanie Carrière </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="a-focus-on-the-androy-municipality" class="level2">
<h2 class="anchored" data-anchor-id="a-focus-on-the-androy-municipality">A focus on the Androy Municipality</h2>
<p>Located in Fianarantsoa Region. We obtain the municipal delimitation from the Global Adminisative Area database (GADM).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geodata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: terra
terra 1.7.29

Attaching package: 'terra'

The following object is masked from 'package:tidyr':

    extract</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapme.biodiversity)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>The legacy packages maptools, rgdal, and rgeos, underpinning this package
will retire shortly. Please refer to R-spatial evolution reports on
https://r-spatial.org/r/2023/05/15/evolution4.html for details.
This package is now running under evolution status 0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'zoo'

The following object is masked from 'package:terra':

    time&lt;-

The following objects are masked from 'package:base':

    as.Date, as.Date.numeric</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mada <span class="ot">&lt;-</span> <span class="fu">gadm</span>(<span class="st">"MDG"</span>, <span class="at">level=</span><span class="dv">0</span>, <span class="at">path =</span> <span class="fu">tempdir</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>() </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>communes_mada <span class="ot">&lt;-</span> <span class="fu">gadm</span>(<span class="st">"MDG"</span>, <span class="at">level=</span><span class="dv">4</span>, <span class="at">path =</span> <span class="fu">tempdir</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>() </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>androy <span class="ot">&lt;-</span> communes_mada <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(NAME_4 <span class="sc">==</span> <span class="st">"Androy"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"view"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>tmap mode set to interactive viewing</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(androy) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_basemap</span>(<span class="st">"OpenStreetMap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b0df66396fe3acaddad7" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b0df66396fe3acaddad7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addPolygons","args":[[[[{"lng":[47.36623001100008,47.36695861800007,47.36758041500008,47.36770629800009,47.36798477100012,47.36856079100016,47.36927413900003,47.36971283000003,47.37073135500003,47.37121200500019,47.37315368600014,47.37390518100005,47.37452697800006,47.37590789800015,47.37615585400005,47.37641143800005,47.37643814000012,47.37818908700012,47.37877273600003,47.37878799500015,47.37919998200005,47.37970352300005,47.38046646100008,47.38136291500018,47.38223648100018,47.38220596300016,47.38248443599997,47.38301467800017,47.38404464600012,47.38577270500019,47.38658142000003,47.38769531200001,47.3889541640001,47.38984298800011,47.39164352500012,47.39332199100011,47.39438247600015,47.39560318000008,47.39728164700017,47.39900970500014,47.39921188400007,47.40013504000007,47.40150451700015,47.40206909100016,47.4022102350001,47.40187072700007,47.40002060000018,47.39773178000019,47.39670944200014,47.39577865600006,47.39472961400008,47.39395523100006,47.39285278400007,47.39194488600009,47.39154434300008,47.39102554300013,47.38948440600007,47.38848113900013,47.38786316000005,47.38771438600003,47.38813400300018,47.38846206600005,47.38882827800018,47.38912963900015,47.38951110800014,47.38971328700012,47.39019775400016,47.39097213800005,47.39123535100009,47.39153289700005,47.39079284700006,47.39015960799998,47.38890457100018,47.38647461000011,47.38546371500001,47.38479995699998,47.38311004700017,47.38183975300001,47.38061904800003,47.38017273000003,47.37985229500009,47.37899017400008,47.37914276099997,47.37802124100011,47.37768173300009,47.37864685100016,47.37976837100007,47.38065338199999,47.38172912500011,47.38272094700011,47.38365554800009,47.38476562500017,47.38567352300015,47.38624954200014,47.38756179800015,47.38861465500014,47.38961792000009,47.39020156900017,47.39073944000017,47.39167022600009,47.39225769100011,47.39282226500012,47.39380645800009,47.39453888000014,47.39499664200019,47.39614486600016,47.39655304000019,47.39681243900003,47.3971138010001,47.39791870100009,47.39864349300001,47.39934921300016,47.40121078500016,47.40219116200018,47.40205764800015,47.4022750850001,47.40299987700007,47.40365982000003,47.40336227400013,47.40199661200006,47.40063476600005,47.40005111600004,47.39974594200004,47.39871978700012,47.39743804900013,47.3972930920001,47.39696502700008,47.39648437400018,47.39622116200007,47.39546585099998,47.39345169000006,47.39192962600009,47.39064025800013,47.38894653300008,47.38763046200017,47.3866386410001,47.38508224500009,47.3841438290001,47.38312530600007,47.38282394399999,47.38180160600018,47.38113403300008,47.38141632100019,47.38185119600018,47.38209915200008,47.38236999500003,47.38265228300014,47.38319015600013,47.38344955400009,47.38416290200013,47.38462066600016,47.38554382400019,47.38607788100006,47.38650512700002,47.38682556200018,47.38746643100018,47.38821029600018,47.38913345200018,47.38961410500008,47.390045165,47.39089965800014,47.39157104400005,47.39181900000017,47.39209747300004,47.3925781260001,47.39288330000011,47.39376831000015,47.39459228500004,47.39535903900003,47.39683532800007,47.39742279100011,47.39774322600005,47.39811706600005,47.39878082200011,47.40000915500002,47.40047454900019,47.40100097600015,47.40228652899998,47.40343475300017,47.40424728300007,47.40439224200009,47.40462875300017,47.40471267700019,47.40493774500015,47.40554046600005,47.40603256200006,47.40650939900019,47.40646362400003,47.40675354000001,47.40722656300017,47.40706253000019,47.40789794900013,47.40836715600017,47.40859222400013,47.40869522100019,47.40852737400007,47.40833282400013,47.40852737400007,47.408405303,47.40846252500012,47.40848922700019,47.40811538700018,47.40792846800008,47.40823745700015,47.40868377600003,47.40910720800008,47.40972137400013,47.40989685000005,47.40953445300016,47.40871429499998,47.40897369400005,47.40873718300014,47.40812683200016,47.40659332300004,47.40477371200018,47.40328216500012,47.40265274100011,47.40216064500009,47.40104293800005,47.39886474600013,47.39759826600016,47.39618682800005,47.39593887400014,47.39621353100006,47.39560318000008,47.39498901400009,47.39651107800006,47.39656448300013,47.39778900100004,47.39897155800008,47.3989372260001,47.39826202500007,47.39831161500013,47.39925765900006,47.39973831200012,47.40062332100007,47.40186309900014,47.40299606399998,47.40323638800015,47.40211486800013,47.40191268900014,47.40154647900005,47.40082931500007,47.40084075800019,47.40185546800012,47.40279388500005,47.40359496999997,47.40334320100004,47.40251922700008,47.4022750850001,47.40179824800003,47.40052413900003,47.39944076500007,47.39869308500005,47.399028778,47.39756393500005,47.39683151300005,47.39545440600006,47.39366912700001,47.39294052100013,47.39294052100013,47.39140319800003,47.39024352900009,47.38917160100004,47.38870239200003,47.38824081500013,47.38763427700002,47.38661956700008,47.38546371500001,47.38449096700003,47.38236999500003,47.38195800800014,47.38064193700006,47.38013839800004,47.37945175100015,47.37896347100008,47.37896728600015,47.3787994380001,47.37702942000004,47.37579345700016,47.37620925900012,47.37596511800007,47.37599945200009,47.37586212300016,47.37546920700015,47.37491989100016,47.37472915700005,47.37447357300005,47.37365341200012,47.37263870200019,47.37152099700018,47.37192916900017,47.37108612100008,47.37029266400003,47.36945724500009,47.36837768500015,47.36819076600005,47.36841201900012,47.36815643400001,47.36785507200017,47.36788558900008,47.36767196699998,47.36719512900015,47.36621093800017,47.36449813800004,47.36329650900018,47.36301040600006,47.36229705700009,47.36198425300012,47.36051940900006,47.35964202800005,47.35905456500001,47.35800170900012,47.35663223200004,47.35692596500013,47.35774230900017,47.35707855300012,47.35680008000008,47.35684585700005,47.35604095400015,47.35405731100008,47.35298538300003,47.35169982800016,47.35196304300018,47.35178375200019,47.35154724100005,47.35106658900008,47.34955978300013,47.34865951600011,47.34682846000015,47.34596633900014,47.34500503499999,47.34328842100007,47.34265899700006,47.34108734100005,47.33997344900007,47.33874130300006,47.33927154600019,47.33932113600019,47.33837509100016,47.33744812000009,47.33632278500016,47.3359107980001,47.33576202400008,47.33679580700004,47.33747100900013,47.33752441400003,47.336490631,47.33454895000006,47.33317566000011,47.33235168400012,47.33142852800012,47.33085250900018,47.32900238000013,47.32798385700016,47.32713699400017,47.32661819500015,47.32635116500006,47.32544708300003,47.324619294,47.32391357400007,47.32349777200011,47.32356643700007,47.32414627200012,47.32564926200018,47.32704162500016,47.3280296320001,47.32826233000003,47.32803344700017,47.32703399700006,47.32642364600008,47.32644653200003,47.32686615000011,47.32693100000017,47.3269271850001,47.32681655900018,47.32635116500006,47.32571792600015,47.32440566900004,47.32334518400012,47.32199478100006,47.32038879300001,47.31907272400014,47.31787490800014,47.31681060799997,47.31629943900009,47.31538772600004,47.31441116300016,47.31349182000019,47.3131256100001,47.31260681100008,47.31195449800003,47.31124878000008,47.31025314300018,47.30893707200011,47.30809402500006,47.30749511700009,47.30194473200009,47.30086517300003,47.29867935100003,47.29821395900007,47.29742813000013,47.29646682700013,47.29548263600014,47.29499054000007,47.29491424500009,47.29486084000018,47.29481125000018,47.29414749100005,47.29331207200011,47.29238510100009,47.29174804600001,47.29074478200016,47.28919982900015,47.28768158000003,47.28601837300016,47.28461837700013,47.28339386000016,47.28204345700004,47.28137970000012,47.28039550700015,47.27983093300014,47.27825927700013,47.27720260700011,47.27565765499997,47.27408981400004,47.27247238100006,47.27092742800005,47.26994323700006,47.269184112,47.26822662400019,47.26714324900018,47.26643371500012,47.2650566100001,47.26400375400004,47.26304245100016,47.26309967100013,47.26295471200012,47.26330184900013,47.26463699300012,47.26573944000012,47.26694488400005,47.26762008600014,47.26935195900018,47.27054596000011,47.2731018070001,47.27378082200005,47.27459335300006,47.27515029900013,47.27481842000009,47.2739486700001,47.27275085400009,47.27201080400016,47.27112579300018,47.27052307200017,47.2690429700001,47.26684951700003,47.26477050700015,47.26290893500015,47.26110458300008,47.25973129300013,47.25853347700013,47.25791168300003,47.25719833500017,47.25687790000018,47.25637054400016,47.2557678230001,47.25380706800013,47.25181960999998,47.25086212100007,47.25014495900007,47.25002670400016,47.24995422300009,47.24989700300017,47.24988937500007,47.25048065200008,47.25205612100012,47.25254058900003,47.25320434500009,47.25317382900005,47.25316238300019,47.25310516300004,47.25241470300011,47.25234604000002,47.25200653100012,47.25194168100006,47.25234604000002,47.25276184200015,47.25422668500011,47.25465393100012,47.25429916399997,47.25357818500009,47.25266647299998,47.252082825,47.25140762300009,47.25071716300016,47.24861526500018,47.24792099000018,47.2474250790001,47.24752426100014,47.24790573200016,47.24886703500005,47.24983215200007,47.25261306700003,47.25317764400012,47.25513458300009,47.25563430900007,47.25579452400007,47.25574874900013,47.25615310600011,47.25732040300011,47.25851058900002,47.25924682600009,47.25899887200018,47.25859069800015,47.25786590600006,47.25769805800019,47.25751495400016,47.25752258300014,47.25828933600008,47.25929641800013,47.26039505000006,47.26118469200003,47.26164627100013,47.26196670600007,47.26246643100012,47.26294326900012,47.26374053900003,47.264339447,47.26473999100011,47.26510238700007,47.2652359010001,47.26478958100012,47.26514053400012,47.26565551800013,47.26556396400019,47.26652145400016,47.26760482800012,47.26835250800013,47.2694778450001,47.27040481600011,47.27101516700009,47.27170562700019,47.27247238100006,47.27309799200003,47.27388763400018,47.27505111600016,47.27559661900011,47.27678299000013,47.27755355900018,47.27871322600015,47.27950668300014,47.28076171900005,47.28133392300015,47.28202819800015,47.28248214700011,47.28324127300004,47.28433608900002,47.2847824100001,47.28489685000017,47.2853584290001,47.28554153500011,47.28615188600008,47.28789520300018,47.2884407040001,47.2893905630001,47.28988647400018,47.29086685200014,47.29242324800009,47.29338836600004,47.29458618200005,47.29595184300013,47.29692840600018,47.29777908400007,47.29917907700019,47.29983902000015,47.30070114100016,47.30229187000003,47.30393982000015,47.30547332700013,47.30604553100005,47.30661010800014,47.30733108400011,47.30963516200012,47.31024170000006,47.30970001200018,47.30952453700013,47.30995941200013,47.31096267700008,47.3114166260001,47.31266021600015,47.31356430100004,47.31417465200019,47.31484222400019,47.31617736800018,47.31761932400013,47.31855011000005,47.31896209700011,47.32025146500001,47.32116317700013,47.32290649400005,47.32394790700016,47.32532882700019,47.32607269200003,47.32756424000013,47.32892227100018,47.32989883400006,47.32991790700009,47.33021545400015,47.33094787600015,47.33231353700012,47.3342094410001,47.33571243400002,47.33745575000006,47.337799072,47.33844375700016,47.33889389000018,47.34070587100013,47.34370040800013,47.34449768100012,47.34501648000014,47.34500122100008,47.34497070300017,47.34430694600007,47.34391021800013,47.34332275300011,47.34318923900003,47.34313201900011,47.34317016600016,47.34375000000017,47.34506606999997,47.34700393600014,47.34792327900004,47.34929657000009,47.35152435200001,47.3535156260001,47.35488510200008,47.35641860900006,47.35736084100006,47.35877990700004,47.35977172900004,47.3609886160001,47.36189270100004,47.36267089900008,47.3636779790001,47.36465072700014,47.36512756300016,47.36544799700005,47.36623001100008],"lat":[-21.22090911799995,-21.22122573799993,-21.22323608399995,-21.22382545499994,-21.22428512599987,-21.22525215199994,-21.22640418999998,-21.22614669799998,-21.22555542099997,-21.22543907099987,-21.22519683899998,-21.22512817299997,-21.2253322599999,-21.22595786999989,-21.22695350599992,-21.22745323199996,-21.22833061099993,-21.22929763799993,-21.23015022299995,-21.23132324099993,-21.23277664199998,-21.23345756599991,-21.23331451399991,-21.23315048199993,-21.23202705399996,-21.23083114599996,-21.22805023299998,-21.22739219699997,-21.22754859899987,-21.22797012399985,-21.22906493999994,-21.22972869899996,-21.2307415009999,-21.23107337899995,-21.23155021699995,-21.23199272199997,-21.23222732599993,-21.23249435399998,-21.2332725519999,-21.23373413099989,-21.23438835199994,-21.23548507599992,-21.23759269699997,-21.23866271999992,-21.24008178699995,-21.24309730499994,-21.24561119099985,-21.24797820899994,-21.24793815699991,-21.24790000799993,-21.24783134499995,-21.24714279199992,-21.24706840399989,-21.24747657799992,-21.24857330199995,-21.24884986799992,-21.24959373499996,-21.24935913099989,-21.24972534099982,-21.25041389499995,-21.25173187199994,-21.25236701999989,-21.25306320199996,-21.25360107499995,-21.25427436899997,-21.25485420099989,-21.25536155699996,-21.25616836499989,-21.25751686099994,-21.25936126699997,-21.26033210799989,-21.26168060299995,-21.2631874089999,-21.26415824899993,-21.26441955499996,-21.26458930999996,-21.26505279399987,-21.26542854199988,-21.26579093899994,-21.26652526799995,-21.26705360299997,-21.26860237099993,-21.27028465199993,-21.27219009399994,-21.27366638299998,-21.27522468599994,-21.27697372499989,-21.27788162299987,-21.27781104999997,-21.27774620099996,-21.27768707299992,-21.2776145929999,-21.27723121699995,-21.27725219799993,-21.27671241799993,-21.27683258099995,-21.27700042699996,-21.27725410399989,-21.27823066699989,-21.27817726199993,-21.27776908799996,-21.27738571199995,-21.27702140799994,-21.27697944599993,-21.27720832899996,-21.2777843479999,-21.27904510499997,-21.27984428499991,-21.28104209799989,-21.28110694899993,-21.28150939999983,-21.28146743799994,-21.28240966799996,-21.28360176099994,-21.28557014499989,-21.28701209999991,-21.2886638629999,-21.29043006799992,-21.29170417799992,-21.2934589379999,-21.29394912799995,-21.29674529899995,-21.29863166799987,-21.29974365199996,-21.30035209599987,-21.30077552799997,-21.30174064599993,-21.30218887399997,-21.3037662509999,-21.30507659899996,-21.30700874299998,-21.30768394399996,-21.30812644999997,-21.30784034699985,-21.3085193629999,-21.30902862499994,-21.31018066399997,-21.31100845299989,-21.31310653599991,-21.31426620499997,-21.3141593929999,-21.31508255099993,-21.31642532399997,-21.31756400999996,-21.31896209799993,-21.32049178999983,-21.32131767299995,-21.32225990199993,-21.32267379699988,-21.32382774299998,-21.32456588799994,-21.32560729899996,-21.32621383699995,-21.32669448799993,-21.32705306999986,-21.32757949899997,-21.32744598299996,-21.32695579499989,-21.32696914599995,-21.32670974799987,-21.32708168099998,-21.32795905999996,-21.32847213799994,-21.32905578599991,-21.32972144999991,-21.33013915899994,-21.33051109399997,-21.33086013799982,-21.33078575199988,-21.33063316199997,-21.33003234899996,-21.3296203619999,-21.32904815599989,-21.32834243699995,-21.32784271199989,-21.32820892299992,-21.32926559299995,-21.3292198179999,-21.33043289299991,-21.33174133199998,-21.33253860399998,-21.33383178699995,-21.33464813299997,-21.33513832099993,-21.33645248499988,-21.33782386699994,-21.33915519699997,-21.33964729199988,-21.34021568399993,-21.34114646999996,-21.34196662799997,-21.34269904999996,-21.34355354299987,-21.34412574699996,-21.34575843799996,-21.34663391199996,-21.34710311899994,-21.34806823699995,-21.34860229399993,-21.34992408599993,-21.35053443999993,-21.35162353599998,-21.35285758899994,-21.35429573099998,-21.35532951399989,-21.35597419699997,-21.3567314149999,-21.35755729599992,-21.35850334099996,-21.35906982499995,-21.36048316899991,-21.36131858799985,-21.36344528199993,-21.36380577099993,-21.36419486999989,-21.36430549499988,-21.36658286899996,-21.36707115199994,-21.36753463699989,-21.36583137399992,-21.36552810699988,-21.36583709699994,-21.36794662499989,-21.36904525699993,-21.37035179099996,-21.37222290099993,-21.37382507299998,-21.37477493299997,-21.37611961399995,-21.37760162299992,-21.37873077399991,-21.38112258799993,-21.3826351159999,-21.38504981999995,-21.38580322199994,-21.38708877499994,-21.38879394499997,-21.3903198239999,-21.39329719599988,-21.39450263999987,-21.3949604039999,-21.39551544199992,-21.39652824499996,-21.3976802819999,-21.39918517999996,-21.40058517499989,-21.40234756499996,-21.40348434399988,-21.40490722499993,-21.40710639799983,-21.40800285299991,-21.40891838099998,-21.40985298199996,-21.41283416699997,-21.41606330799993,-21.41683959899984,-21.41731452899995,-21.41805458099998,-21.4188938129999,-21.41952514499991,-21.42031669699992,-21.42130851599995,-21.42120552099993,-21.42168807899998,-21.42287254199994,-21.42358779799997,-21.42428398099992,-21.42503547599995,-21.42506790199997,-21.42486953799988,-21.42416190999995,-21.42337989799989,-21.4237556459999,-21.42460441599997,-21.42582320999992,-21.42719268699989,-21.42802810599994,-21.42882347099993,-21.42934799299996,-21.42924690299998,-21.43013954199989,-21.43161582899995,-21.43276786799987,-21.43371963499993,-21.43504142699987,-21.43596076999989,-21.43687057499994,-21.43793868999995,-21.43866157399998,-21.43945884699997,-21.44071006799993,-21.44302558899994,-21.44451522799983,-21.44539832999988,-21.44569396899993,-21.44594955399992,-21.44692420899992,-21.44778060899989,-21.44891548199985,-21.45007514899987,-21.45100211999994,-21.45188903699994,-21.45287322999991,-21.45384979099998,-21.45466422899995,-21.45555877599998,-21.45647048899991,-21.45759773199995,-21.45918846099994,-21.46013259799997,-21.46144485399992,-21.46270370399998,-21.46307373099995,-21.46408271799987,-21.46493339499983,-21.46551895099998,-21.46669006299987,-21.46780776999998,-21.46927261399986,-21.47053718499996,-21.47120284899995,-21.47168540899992,-21.47276878299994,-21.47142028699994,-21.47040748699987,-21.46969032299995,-21.46904945299997,-21.46877479499994,-21.46855163499998,-21.46785735999998,-21.4665927879999,-21.46596527099996,-21.46519851799991,-21.46431350599988,-21.46275138799996,-21.46190452599996,-21.46107864499993,-21.46024894599992,-21.45963859499994,-21.45943832299992,-21.45912551799995,-21.45793723999998,-21.45706558199987,-21.45544433599986,-21.45451164199994,-21.45372390799997,-21.45306777899992,-21.45244026199998,-21.45222282499992,-21.45226097099987,-21.45217132499994,-21.45122528099989,-21.45056342999993,-21.44779014499989,-21.44607925399998,-21.44456672599989,-21.4434299479999,-21.44262122999987,-21.44147109899995,-21.44047737199998,-21.43952560499997,-21.4377975459999,-21.43693733099997,-21.43619918899992,-21.43556976199989,-21.43534851099997,-21.43446349999994,-21.43344116199989,-21.43227386499996,-21.43126106299997,-21.42949294999988,-21.42863273699993,-21.42590904199983,-21.42486762999988,-21.42394256499983,-21.42270278899991,-21.42174339199994,-21.42158126899994,-21.42134666499987,-21.42142105099992,-21.42136764399993,-21.42102622999994,-21.42138099699997,-21.42166137699991,-21.42162132299995,-21.42068862899998,-21.41933631899991,-21.41827964699996,-21.41754531799995,-21.41725158599991,-21.41539192099998,-21.41455078199982,-21.4135761259999,-21.41260719299993,-21.41147041299996,-21.41083717299995,-21.41015243599998,-21.41078758299994,-21.41079330399998,-21.40719795199993,-21.40657806299987,-21.40568542399996,-21.40460777299995,-21.40318679699988,-21.40213012699991,-21.40096282999997,-21.39981460599984,-21.39841461099991,-21.39774894699997,-21.3980026239999,-21.39857864399988,-21.3989944459999,-21.39959335299983,-21.40039825399998,-21.4009971619999,-21.40139198299994,-21.40139579799984,-21.40121459999995,-21.40066528399996,-21.39997863699989,-21.39869308399994,-21.39802741999995,-21.39642524799996,-21.39601516599987,-21.3958339699999,-21.39567947299997,-21.39558792099996,-21.39533805899998,-21.39483451799998,-21.39417076199993,-21.39346122599994,-21.39266014099991,-21.39211273099994,-21.39112472399989,-21.39041519099982,-21.38982772799994,-21.38904952999997,-21.38832855299989,-21.38782310499994,-21.38735771199998,-21.38707733199993,-21.38618659999997,-21.38544464099994,-21.38365936199995,-21.38163566499992,-21.3800296789999,-21.3786106099999,-21.37748145999984,-21.37674331599987,-21.37541770799987,-21.37383842399993,-21.37183761599994,-21.36966514599987,-21.3676795959999,-21.36606788499995,-21.36506843599994,-21.36356925999991,-21.36267852899994,-21.36105537299983,-21.35961532499994,-21.35818290599991,-21.35606956399994,-21.35547637899998,-21.35452842699988,-21.35410308699994,-21.35323715099997,-21.35243987899992,-21.35156631499996,-21.34972190899992,-21.34834670999993,-21.34725761399994,-21.34631347699997,-21.34552574199989,-21.34441947799996,-21.34344863799993,-21.34218978899986,-21.34160423399982,-21.34091186399991,-21.33901977499994,-21.33793449399991,-21.3352699269999,-21.33341789299988,-21.3313808449999,-21.32989120499985,-21.32822799699989,-21.32621955799982,-21.32442474399988,-21.32380294699988,-21.32276725799989,-21.32185173099998,-21.32043838499993,-21.31824302699994,-21.31682205199996,-21.31582069299998,-21.31502532899998,-21.31463622999991,-21.31367873999994,-21.3130645739999,-21.31192588799996,-21.31115531899997,-21.31028556899992,-21.30931091299993,-21.30851554799995,-21.30800819399997,-21.30754279999991,-21.30446243299997,-21.30349922099992,-21.30243110599991,-21.30089950599995,-21.29991531299987,-21.29866218599994,-21.29731941099993,-21.29621505699987,-21.29443740799996,-21.29291152999991,-21.29132652299995,-21.28977203299996,-21.28848838699997,-21.28726768499996,-21.28620719799994,-21.28523254499987,-21.28413963299994,-21.28389167699993,-21.28326988299995,-21.28262901299991,-21.28171157699995,-21.2815608979999,-21.28153991699998,-21.28138732899993,-21.28106117199997,-21.28034973099989,-21.27991676299996,-21.2795448309999,-21.27894592299998,-21.27849960399993,-21.27708244299993,-21.27633476299997,-21.27529144199997,-21.27457237299996,-21.27348518399998,-21.27238654999996,-21.27110290499996,-21.26964569199993,-21.26820945699995,-21.26743888799996,-21.26715469299995,-21.2667331699999,-21.26646995499988,-21.26655769199994,-21.26627540599998,-21.26606941199998,-21.26481437599995,-21.26329040399997,-21.26216125399998,-21.26079749999997,-21.26007270799994,-21.25929069399996,-21.25811958199989,-21.25764083899998,-21.25703620899998,-21.25574111999998,-21.25522613599992,-21.25483512799991,-21.2537174229999,-21.25275993299988,-21.25183105499997,-21.25165557899993,-21.25167465199996,-21.2522544869999,-21.25296211199992,-21.25338172999994,-21.25385856699995,-21.25413322499992,-21.25437545699998,-21.25446128799996,-21.25450134199991,-21.25431251599991,-21.25401878399998,-21.25383949299987,-21.25406265199996,-21.25408744799995,-21.25446891799982,-21.25495719899988,-21.25646591199995,-21.25814246999994,-21.26005554199992,-21.26141548099991,-21.26294135999996,-21.26425170899995,-21.26484298699984,-21.26517867999996,-21.26542282099996,-21.26530838099995,-21.26544761499986,-21.26549339199983,-21.26689720099989,-21.26799774199998,-21.26830673199981,-21.26928138699998,-21.26963615399995,-21.26977729799989,-21.26924323999992,-21.26890563999996,-21.26849746799996,-21.26873207099993,-21.26818275399995,-21.26688957299996,-21.26518440299992,-21.26376152099988,-21.26269531099996,-21.26195907599998,-21.26104927099993,-21.26051711899993,-21.25989913999996,-21.25853347799995,-21.25751495299994,-21.25680541999998,-21.25671386599993,-21.25525283799993,-21.25378227099992,-21.25172424199991,-21.25063133299989,-21.24934577799996,-21.24781608599994,-21.24685668899997,-21.24595451399983,-21.24547767699988,-21.24478149399994,-21.24369621299996,-21.24244308499982,-21.24147605899992,-21.24044418299997,-21.23966407699993,-21.23909759499986,-21.23831939599995,-21.23762321399988,-21.23701667799997,-21.23550987199991,-21.23509025499993,-21.23391914299992,-21.23223304599998,-21.23032379199998,-21.22916412299998,-21.22825813299988,-21.22696304199991,-21.22502517599997,-21.22330856299988,-21.22202491799982,-21.22090911799995]}]]],"X1","androy",{"interactive":false,"className":"","pane":"tmap401","stroke":true,"color":"#FF0000","weight":1,"opacity":1,"fill":true,"fillOpacity":0,"dashArray":"none","smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[[],"androy",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[-21.47276878299994,-21.22090911799995],"lng":[47.2474250790001,47.40989685000005]},"fitBounds":[-21.47276878299994,47.2474250790001,-21.22090911799995,47.40989685000005,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The municipality parially overlaps with the Ranomafana national park.</p>
</section>
<section id="rainfall" class="level2">
<h2 class="anchored" data-anchor-id="rainfall">Rainfall</h2>
<p>We use the CHIRPS data from NASA to estimate 3 day average rainfall on the Androy Municipality. We compute the data using the package mapme.biodiversity <span class="citation" data-cites="mapme.biodiversity">(<a href="#ref-mapme.biodiversity" role="doc-biblioref">Görgen and Bhandari 2023</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch data</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>aoi <span class="ot">&lt;-</span> <span class="fu">init_portfolio</span>(androy, <span class="at">years =</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2021</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_resources</span>(<span class="st">"chirps"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>The following requested resource is already available: chirps.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>aoi2 <span class="ot">&lt;-</span> aoi <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calc_indicators</span>(<span class="st">"precipitation_chirps"</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">engine =</span> <span class="st">"exactextract"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">scales_spi =</span> <span class="dv">3</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">spi_prev_years =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Calculating the Standardized Precipitation Evapotranspiration Index (SPEI) at a time scale of 3. Using kernel type 'rectangular', with 0 shift. Fitting the data to a Gamma distribution. Using the ub-pwm parameter fitting method. Missing values (`NA`) will not be considered in the calculation. Using the whole time series as reference period. Input type is vector. No time information provided, assuming a monthly time series."
[1] "Calculating the Standardized Precipitation Evapotranspiration Index (SPEI) at a time scale of 3. Using kernel type 'rectangular', with 0 shift. Fitting the data to a Gamma distribution. Using the ub-pwm parameter fitting method. Missing values (`NA`) will not be considered in the calculation. Using the whole time series as reference period. Input type is vector. No time information provided, assuming a monthly time series."
[1] "Calculating the Standardized Precipitation Evapotranspiration Index (SPEI) at a time scale of 3. Using kernel type 'rectangular', with 0 shift. Fitting the data to a Gamma distribution. Using the ub-pwm parameter fitting method. Missing values (`NA`) will not be considered in the calculation. Using the whole time series as reference period. Input type is vector. No time information provided, assuming a monthly time series."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>rainfall_androy <span class="ot">&lt;-</span> aoi2[[<span class="dv">16</span>]][[<span class="dv">1</span>]]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>rainfall_androy <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rainfall_3d_mean =</span> <span class="fu">rollmean</span>(absolute, <span class="at">k =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> dates, <span class="at">y =</span> rainfall_3d_mean)) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="perturbations_androy_files/figure-html/rainfall-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="hurricanes" class="level2">
<h2 class="anchored" data-anchor-id="hurricanes">Hurricanes</h2>
<p>We</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-mapme.biodiversity" class="csl-entry" role="listitem">
Görgen, Darius A., and Om Prakash Bhandari. 2023. <span>“Mapme.biodiversity: Efficient Monitoring of Global Biodiversity Portfolios.”</span>
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>